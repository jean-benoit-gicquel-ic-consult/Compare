<WebDesigner xmlns:ns0="http://www.vi-net.de/aeds" ns0:tdnsHash="cc9acf44-0555-2085-4e2f-dcc204d1407c">
  <ConfigurationRoot MetamodelVersion="2016-05-08" ID="QER_ITShop_Approvals_Mfa">
    <Extensions>
      <AddObject ObjectID="Action30" ObjectType="ActionSequence" SortOrder="10">
        <ActionSequence ScriptItemUID="QERAction2" ItemUID="MFA required?" Condition="not(isnullorempty(getconfigparm(&quot;QER\Person\Defender\ApiKey&quot;)) and isnullorempty(getconfigparm(&quot;QER\Person\Defender\CredentialString&quot;)) and&#xD;&#xA;isnullorempty(getconfigparm(&quot;QER\Person\Starling\ApiEndpoint&quot;)))&#xD;&#xA;and&#xD;&#xA;0 &lt; select count() from pwotodecide where (doapprove and uid_accproduct in (&#xD;&#xA;select uid_accproduct from accproduct where IsApproveRequiresMfa))&#xD;&#xA;">
          <CallAction ScriptItemUID="QERCall1" ActionID="VI_Popup">
            <VirtualControlMapping ContainerType="Container" VirtualControl="PopupContent">
              <Container ScriptItemUID="QERContainer1">
                <ControlReferenceControlList ID="QER_DefenderAuthentication" ScriptItemUID="QERControlRef2">
                  <VirtualFunctionMapping ScriptItemUID="QERVirtualFunctionMapping2" ID="Text()" Value="translate(&quot;#LDS#An authentication is required to approve one of the selected requests.&quot;)+&quot; &quot;+&#xD;&#xA;translate(&quot;#LDS#Get the token response from the Starling 2FA Cloud app. If you do not have the app, request a token response through SMS or phone call.&quot;)" />
                  <VirtualControlMapping ContainerType="ActionComponent" VirtualControl="CodeVerified">
                    <ActionComponent ScriptItemUID="QERAction1">
                      <ActionOnControl />
                    </ActionComponent>
                  </VirtualControlMapping>
                </ControlReferenceControlList>
              </Container>
            </VirtualControlMapping>
            <VirtualControlMapping ContainerType="Container" VirtualControl="PopupBottom">
              <Container ScriptItemUID="QERContainer2">
                <ControlReferenceControlList ID="QBM_Common_PopupCloseButton" ScriptItemUID="QERControlRef1">
                  <VirtualFunctionMapping ScriptItemUID="QERVirtualFunctionMapping5" ID="TriggerValidation()" Value="false" />
                  <VirtualFunctionMapping ScriptItemUID="QERVirtualFunctionMapping3" ID="MoreThanOneButton()" Value="true" />
                </ControlReferenceControlList>
              </Container>
            </VirtualControlMapping>
            <VirtualFunctionMapping ScriptItemUID="QERVirtualFunctionMapping1" ID="PopupTitle()" Value="translate(&quot;#LDS#Authentication required&quot;)" />
          </CallAction>
          <ActionSequence ScriptItemUID="QERAction3" Condition="not(from mfaresponse select codecorrect)">
            <EndExecution />
          </ActionSequence>
        </ActionSequence>
      </AddObject>
      <AddObject ObjectID="Tables1" ObjectType="Tables">
        <DataTableSingleRow ScriptItemUID="QERDataTableSingleRow1" Table="MfaResponse">
          <Column DataType="System.Boolean" Name="CodeCorrect" ScriptItemUID="QERColumn1" />
        </DataTableSingleRow>
      </AddObject>
    </Extensions>
  </ConfigurationRoot>
</WebDesigner>
